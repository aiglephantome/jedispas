import requests
import time
import webbrowser

proxies = [
    "http://159.69.220.40:3128",
    "http://89.207.129.100:3128",
    "http://64.225.8.192:80",
    "159.69.220.40:3128"
    "89.207.129.100:3128"
    "64.225.8.192:80"
"188.165.255.116:3128"
"24.109.252.48:80"
"24.109.252.48:80"
"186.1.206.154:3128"
"122.155.165.191:3128"
"190.26.201.194:8080"
"24.109.252.48:80"
"64.227.6.0:4003"
"139.59.228.95:8118"
"20.114.8.198:3128"
"122.155.165.191:3128"
"165.154.233.164:8080"
"161.82.183.156:80"
"103.156.17.123:8888"
"154.236.168.179:1981"
"85.195.104.71:80"
"147.28.155.79:3128"
"103.41.173.47:3128"
"182.253.136.26:8080"
"165.154.233.164:8080"
"118.173.56.31:80"
"165.154.233.164:8080"
"157.230.34.152:39521"
"89.207.129.100:3128"
"200.160.105.197:3128"
"20.114.8.198:3128"
"41.65.236.48:1976"
"122.3.41.154:8090"
"43.155.106.118:1088"
"200.122.255.42:999"
"182.253.136.26:8080"
"190.90.8.74:8080"
"103.48.68.36:83"
"103.144.165.86:8080"
"103.48.68.35:83"
"196.15.213.235:3128"
"62.193.108.135:1976"
"154.236.168.140:1981"
"103.56.205.88:8085"
"103.144.165.86:8080"
"186.5.94.202:999"
"213.5.190.194:41890"
"85.221.249.213:8080"
"193.122.71.184:3128"
"38.242.158.170:3128"
"41.65.236.53:1976"
"41.65.236.37:1976"
"43.155.106.118:1088"
"181.129.2.90:8081"
"80.246.128.14:8080"
"41.86.251.61:8080"
"80.91.116.129:8081"
"68.64.250.38:8080"
"189.203.180.233:999"
"83.229.73.175:80"
"47.252.4.64:8888"
"179.42.78.25:999"
"186.47.83.126:80"
"118.70.109.148:55443"
"36.37.177.186:8080"
"131.161.239.193:8090"
"69.160.192.139:8080"
"213.33.249.214:3128"
"102.68.128.212:8080"
"187.94.16.59:39665"
"45.186.60.10:8085"
"79.122.230.20:8080"
"46.98.251.182:8081"
"45.5.119.178:8080"
"45.148.145.30:443"]

url = "https://www.tiktok.com"

for i in range(10):
    proxy = proxies[i % len(proxies)]
    response = requests.get(url, proxies={"http": proxy})
    webbrowser.open(url, new=2) # ouvre l'URL dans un nouvel onglet
    time.sleep(3) # attend 3 secondes
    # ferme l'onglet
    for j in range(10):
        try:
            webbrowser.get("windows-default").close(url)
        except webbrowser.Error:
            time.sleep(0.1)